<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KeyCRM Sales Dashboard</title>
    <link rel="stylesheet" href="/static/css/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <header>
        <h1>KeyCRM Sales Dashboard</h1>
        <div class="date-controls">
            <div class="period-buttons">
                <button class="period-btn active" data-period="today">Today</button>
                <button class="period-btn" data-period="yesterday">Yesterday</button>
                <button class="period-btn" data-period="week">This Week</button>
                <button class="period-btn" data-period="month">This Month</button>
            </div>
            <div class="custom-dates">
                <input type="date" id="startDate" />
                <span>to</span>
                <input type="date" id="endDate" />
                <button id="applyDates">Apply</button>
            </div>
        </div>
    </header>

    <main>
        <section class="summary-cards">
            <div class="card">
                <div class="card-icon orders-icon">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg>
                </div>
                <div class="card-content">
                    <span class="card-label">Total Orders</span>
                    <span class="card-value" id="totalOrders">-</span>
                </div>
            </div>
            <div class="card">
                <div class="card-icon revenue-icon">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/></svg>
                </div>
                <div class="card-content">
                    <span class="card-label">Total Revenue</span>
                    <span class="card-value" id="totalRevenue">-</span>
                </div>
            </div>
            <div class="card">
                <div class="card-icon avg-icon">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91s4.18 1.39 4.18 3.91c-.01 1.83-1.38 2.83-3.12 3.16z"/></svg>
                </div>
                <div class="card-content">
                    <span class="card-label">Average Check</span>
                    <span class="card-value" id="avgCheck">-</span>
                </div>
            </div>
            <div class="card">
                <div class="card-icon returns-icon">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"/></svg>
                </div>
                <div class="card-content">
                    <span class="card-label">Returns</span>
                    <span class="card-value" id="totalReturns">-</span>
                </div>
            </div>
        </section>

        <section class="charts-grid">
            <div class="chart-container full-width">
                <h3>Revenue Trend</h3>
                <canvas id="revenueChart"></canvas>
            </div>
            <div class="chart-container">
                <h3>Orders by Source</h3>
                <canvas id="ordersChart"></canvas>
            </div>
            <div class="chart-container">
                <h3>Revenue by Source</h3>
                <canvas id="revenueBySourceChart"></canvas>
            </div>
            <div class="chart-container full-width">
                <h3>Top 10 Products</h3>
                <canvas id="topProductsChart"></canvas>
            </div>
        </section>
    </main>

    <footer>
        <p>KeyCRM Sales Dashboard</p>
    </footer>

    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
    </div>

    <script src="/static/js/charts.js"></script>
</body>
</html>
