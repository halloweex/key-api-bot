import{r as l,k as P,j as t,c,h as O,f as _,C as w,i as E}from"./index-BL1dFcbn.js";import{t as h,C as I,a as s,R as x,G as u,f as M,X as y,Y as p,T as f,c as j,B as g,d as X}from"./ChartContainer-MKzQ0Ycl.js";import{b as K}from"./colors-CU0AFKqM.js";import{B as b,a as S}from"./BarChart-DCAIJ4Aa.js";import{C as B,X as C,Y as v}from"./CartesianChart-DBaW1knG.js";import"./tooltipContext-nfTICcRa.js";const m=l.memo(function({label:a,value:n,colorClass:o}){return t.jsx(w,{className:"bg-slate-700/50",children:t.jsxs(E,{className:"py-2 px-3",children:[t.jsx("p",{className:"text-xs text-slate-400",children:a}),t.jsx("p",{className:`text-lg font-semibold truncate ${o}`,children:n})]})})}),F=l.memo(function(){const{data:a,isLoading:n,error:o,refetch:R}=P(),d=l.useMemo(()=>a?.topByRevenue?.labels?.length?a.topByRevenue.labels.map((e,r)=>({name:h(e,15),fullName:e||"Unknown",revenue:a.topByRevenue.data?.[r]??0})):[],[a]),A=l.useMemo(()=>a?.topByQuantity?.labels?.length?a.topByQuantity.labels.map((e,r)=>({name:h(e,15),fullName:e||"Unknown",quantity:a.topByQuantity.data?.[r]??0})):[],[a]),i=a?.metrics,T=!n&&d.length===0;return t.jsxs(I,{title:"Brand Analytics",isLoading:n,error:o,onRetry:R,isEmpty:T,height:"md",ariaLabel:"Bar charts showing top brands by revenue and quantity",children:[i&&t.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[t.jsx(m,{label:"Total Brands",value:c(i.totalBrands??0),colorClass:"text-blue-400"}),t.jsx(m,{label:"Top Brand",value:i.topBrand??"N/A",colorClass:"text-purple-400"}),t.jsx(m,{label:"Top Brand Share",value:O(i.topBrandShare??0),colorClass:"text-green-400"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-slate-400 mb-2",children:"Top 10 by Revenue"}),t.jsx("div",{style:{height:s.height.md},children:t.jsx(x,{width:"100%",height:"100%",children:t.jsxs(b,{data:d,layout:"vertical",margin:{left:10,right:20},children:[t.jsx(B,{...u,horizontal:!1}),t.jsx(C,{type:"number",...y,fontSize:s.fontSize.xs,tickFormatter:M}),t.jsx(v,{type:"category",dataKey:"name",...p,fontSize:s.fontSize.xs,width:s.yAxisWidth.md}),t.jsx(f,{contentStyle:j,formatter:e=>[_(Number(e)||0),"Revenue"],labelFormatter:(e,r)=>r?.[0]?.payload?.fullName||String(e)}),t.jsx(S,{dataKey:"revenue",fill:K.primary,...g})]})})})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-slate-400 mb-2",children:"Top 10 by Quantity"}),t.jsx("div",{style:{height:s.height.md},children:t.jsx(x,{width:"100%",height:"100%",children:t.jsxs(b,{data:A,layout:"vertical",margin:{left:10,right:20},children:[t.jsx(B,{...u,horizontal:!1}),t.jsx(C,{type:"number",...y,fontSize:s.fontSize.xs}),t.jsx(v,{type:"category",dataKey:"name",...p,fontSize:s.fontSize.xs,width:s.yAxisWidth.md}),t.jsx(f,{contentStyle:j,formatter:e=>[c(Number(e)||0),"Quantity"],labelFormatter:(e,r)=>r?.[0]?.payload?.fullName||String(e)}),t.jsx(S,{dataKey:"quantity",fill:X.accent,...g})]})})})]})]})]})});export{F as BrandAnalyticsChart};
