import{r as i,a as p,j as e,f as o}from"./index-BL1dFcbn.js";import{C as y,a as l,R as c,G as S,f as g,X as R,Y as b,T as m,c as d,B as C,P,g as v}from"./ChartContainer-MKzQ0Ycl.js";import{S as O}from"./colors-CU0AFKqM.js";import{B,a as _}from"./BarChart-DCAIJ4Aa.js";import{C as N,X as A,Y as E}from"./CartesianChart-DBaW1knG.js";import{C as h}from"./tooltipContext-nfTICcRa.js";import{P as I,a as T}from"./PieChart-DIc3lDKF.js";const G=i.memo(function(){const{data:t,isLoading:n,error:u,refetch:x}=p(),s=i.useMemo(()=>t?.labels?.length?t.labels.map((a,r)=>({name:a,revenue:t.revenue?.[r]??0,orders:t.orders?.[r]??0,color:t.backgroundColor?.[r]??O[r%3]??"#2563EB"})):[],[t]),f=i.useMemo(()=>s.reduce((a,r)=>a+r.revenue,0),[s]),j=!n&&s.length===0;return e.jsxs(y,{title:"Sales by Source",isLoading:n,error:u,onRetry:x,isEmpty:j,height:"md",ariaLabel:"Bar and pie charts showing sales distribution by source",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx("div",{style:{height:l.height.md},children:e.jsx(c,{width:"100%",height:"100%",children:e.jsxs(B,{data:s,layout:"vertical",margin:{left:20,right:20},children:[e.jsx(N,{...S,horizontal:!1}),e.jsx(A,{type:"number",...R,tickFormatter:g}),e.jsx(E,{type:"category",dataKey:"name",...b,width:l.yAxisWidth.md}),e.jsx(m,{contentStyle:d,labelStyle:{color:"#F3F4F6"},formatter:a=>[o(Number(a)||0),"Revenue"]}),e.jsx(_,{dataKey:"revenue",...C,children:s.map((a,r)=>e.jsx(h,{fill:a.color},`bar-${r}`))})]})})}),e.jsx("div",{style:{height:l.height.md},children:e.jsx(c,{width:"100%",height:"100%",children:e.jsxs(I,{children:[e.jsx(T,{data:s,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,dataKey:"revenue",nameKey:"name",label:({name:a,percent:r})=>`${a}: ${v(r??0)}`,...P,children:s.map((a,r)=>e.jsx(h,{fill:a.color},`pie-${r}`))}),e.jsx(m,{contentStyle:d,formatter:a=>[o(Number(a)||0),"Revenue"]})]})})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-slate-700",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-400 text-sm",children:"Total Revenue"}),e.jsx("span",{className:"text-white font-semibold",children:o(f)})]})})]})});export{G as SalesBySourceChart};
